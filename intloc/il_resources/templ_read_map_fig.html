$preamble$
<DOCTYPE !html>
    <html lang="en">
        <head>
            <meta name="viewport" content="width=device-width, initial-scale=1">
        </head>
        <style>
            #tooltip {
                background: #fff8dc;
                border: 1px solid black;
                border-radius: 5px;
                padding: 5px;
                white-space: pre-wrap;
                }
        </style>
        <script>
            function showTooltip(evt, text) {
                let tooltip = document.getElementById("tooltip");
                tooltip.innerHTML = text;
                tooltip.style.display = "block";
                tooltip.style.left = evt.pageX + 10 + 'px';
                tooltip.style.top = evt.pageY + 10 + 'px';
            }
        
            function hideTooltip() {
                var tooltip = document.getElementById("tooltip");
                tooltip.style.display = "none";
            }
        </script>
        <body>
            <div id="tooltip" display="none" style="position: absolute; display: none;"></div>
            <?xml version="1.0"?>
            <svg height=@~svg_height@ version="1.1" width=@~svg_width@ xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <desc>read to reference mapping figure</desc>
                <g transform="translate(0 10)">
$reference$
                <g class="reference" transform="translate(0 0)">
                    <polygon class="int-site" fill="blue" transform="translate(@#int_mark@ 20)" points="-5 0, 0 10, 5 0"/>
                    <text class="int_txt" fill="blue" font-size="10px" transform="translate(@#int_label@ 5)" font-weight="regular" >Integration site</text>
                    <rect class="ref" x="20" y="30" fill="grey" width=@~ref_len@ height="10"/>
                    <rect class="major_tick" x=@~major_x@ y="20" fill="rgb(91,91,91)" width="1" height="20"/>
                    <text class="tick_txt" fill="black" font-size="8px" transform="translate(@#pos_label@ 15)" font-weight="regular" >@#max_start_label@</text>
                    <rect class="minor_tick" x=@~minor_x@ y="25" fill="rgb(91,91,91)" width="1" height="5"/>
                </g>
$int_read$
                <g class="read">
                    <g class="read_pos" transform="translate(@#read_x@ @#read_z@)">
                        <g>
                            <rect class="int_read" x="0" y="0" fill=@~color@ stroke="green" stroke-width="0" width=@~al_len@ height="10" onmousemove='showTooltip(evt, @~ttip_txt@);' onmouseout="hideTooltip();"/>
                            <polygon class="arrowhead" transform="translate(@#direction@ 0)" fill="black" points="@#arrowhead@"/>
                        </g>
                    </g>
                </g>
$non_int_read$
                <g class="read">
                    <g transform="translate(@#read_x@ @#read_z@)">
                        <g>
                            <rect class="non_int_read" fill="red" stroke="red" stroke-width="0" width=@~al_len@ height="10"/>
                        </g>
                    </g>
                </g>
$end_of_file$
            </g>
        </svg>
    </body>
</html>